
[System.Serializable]
public class DialogueEntry
{
    public string id;
    public string speakerName;
    [TextArea] public string dialogueText;
    public DialogueChoice[] choices;
}

[System.Serializable]
public class DialogueChoice
{
    public string choiceText;
    public string nextDialogueID;
}
DialogueEntry GetDialogueByID(string id)
{
    foreach (var entry in dialogueDatabase)
        if (entry.id == id) return entry;
    return null;
}
public class NPCDialogue : MonoBehaviour
{
    public DialogueEntry[] dialoguePool;

    public void StartRandomDialogue()
    {
        if (dialoguePool.Length == 0) return;
        
        int randomIndex = Random.Range(0, dialoguePool.Length);
        DialogueManager.Instance.StartDialogue(dialoguePool[randomIndex]);
    }

    void OnTriggerStay2D(Collider2D other)
    {
        if (other.CompareTag("Player") && Input.GetKeyDown(KeyCode.Space))
        {
            StartRandomDialogue();
        }
    }
}
//DialogueSystem (<NPCID>,<DialogueID>,<DialogueBranchID>,<DialogueProgressID>)
public DialogueEntry[] WaterSpiritDialoguePool =
{
    new DialogueEntry { id = "1aa0", speakerName = "Water Spirit", dialogueText = "Hello there little spirit!", //Starter convo
        choices = new DialogueChoice[] {
            new DialogueChoice { choiceText = "What happened in this place?", nextDialogueID = "1aa1" }, //branch 1
            new DialogueChoice { choiceText = "Hi", nextDialogueID = "1ab1" } //branch 2
        }
    },
        new DialogueEntry { id = "1aa1", speakerName = "Water Spirit", dialogueText = "A terrible calamity, ruining the seas and laid waste into the waters", nextDialogueID = "1a2" //branch 1
    },
        new DialogueEntry { id = "1ab1", speakerName = "Water Spirit", dialogueText = "You seem to be lost into this place", nextDialogueID = "1a2" //branch 2
    },
    new DialogueEntry { id = "1ba0", speakerName = "Water Spirit", dialogueText = "I have wares for the right price.",
        choices = new DialogueChoice[] {
            new DialogueChoice { choiceText = "Show me.", nextDialogueID = "1ba1" },
            new DialogueChoice { choiceText = "Any discounts?", nextDialogueID = "2bb1" }
        }
    }
};
